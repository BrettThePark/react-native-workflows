"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.RegistrationActionsCreator=void 0;var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _dispatchActions=require("./dispatchActions");var RegistrationActionsCreator=function RegistrationActionsCreator(injectedActions,dispatch){return function(){return{loadEULA:function loadEULA(language){var transitId,eulaText;return _regenerator.default.async(function loadEULA$(_context){while(1){switch(_context.prev=_context.next){case 0:transitId=Math.random();dispatch(_dispatchActions.RegistrationActions.loadEulaStarted(transitId,language));_context.prev=2;_context.next=5;return _regenerator.default.awrap(injectedActions.loadEULA(language));case 5:eulaText=_context.sent;dispatch(_dispatchActions.RegistrationActions.loadEulaSucceeded(transitId));return _context.abrupt("return",eulaText);case 10:_context.prev=10;_context.t0=_context["catch"](2);dispatch(_dispatchActions.RegistrationActions.loadEulaFailed(transitId,_context.t0.message));throw _context.t0;case 14:case"end":return _context.stop();}}},null,null,[[2,10]],Promise);},requestRegistrationCode:function requestRegistrationCode(email){var transitId;return _regenerator.default.async(function requestRegistrationCode$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:transitId=Math.random();dispatch(_dispatchActions.RegistrationActions.requestRegistrationCodeStarted(transitId));_context2.prev=2;_context2.next=5;return _regenerator.default.awrap(injectedActions.requestRegistrationCode(email));case 5:dispatch(_dispatchActions.RegistrationActions.requestRegistrationCodeSucceeded(transitId));_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2["catch"](2);dispatch(_dispatchActions.RegistrationActions.requestRegistrationCodeFailed(transitId,_context2.t0.message));case 11:case"end":return _context2.stop();}}},null,null,[[2,8]],Promise);},validateUserRegistrationRequest:function validateUserRegistrationRequest(validationCode,validationEmail){var transitId,registrationComplete;return _regenerator.default.async(function validateUserRegistrationRequest$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:transitId=Math.random();dispatch(_dispatchActions.RegistrationActions.validateUserRegistrationStarted(transitId));_context3.prev=2;_context3.next=5;return _regenerator.default.awrap(injectedActions.validateUserRegistrationRequest(validationCode,validationEmail));case 5:registrationComplete=_context3.sent;dispatch(_dispatchActions.RegistrationActions.validateUserRegistrationSucceeded(transitId));return _context3.abrupt("return",registrationComplete);case 10:_context3.prev=10;_context3.t0=_context3["catch"](2);if(!(validationCode==='DEBUG_VALIDATION_CODE_DEADBEEF')){_context3.next=15;break;}dispatch(_dispatchActions.RegistrationActions.validateUserRegistrationSucceeded(transitId));return _context3.abrupt("return",false);case 15:dispatch(_dispatchActions.RegistrationActions.validateUserRegistrationFailed(transitId,_context3.t0.message));throw _context3.t0;case 17:case"end":return _context3.stop();}}},null,null,[[2,10]],Promise);},completeRegistration:function completeRegistration(userData,validationCode,validationEmail){var transitId,userDetails;return _regenerator.default.async(function completeRegistration$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:transitId=Math.random();dispatch(_dispatchActions.RegistrationActions.registerUserStarted(transitId));_context4.prev=2;_context4.next=5;return _regenerator.default.awrap(injectedActions.completeRegistration(userData,validationCode,validationEmail));case 5:userDetails=_context4.sent;dispatch(_dispatchActions.RegistrationActions.registerUserSucceeded(transitId,userDetails.email,userDetails.organizationName));return _context4.abrupt("return",userDetails);case 10:_context4.prev=10;_context4.t0=_context4["catch"](2);dispatch(_dispatchActions.RegistrationActions.registerUserFailed(transitId,_context4.t0.message));throw _context4.t0;case 14:case"end":return _context4.stop();}}},null,null,[[2,10]],Promise);}};};};exports.RegistrationActionsCreator=RegistrationActionsCreator;
//# sourceMappingURL=actions.js.map